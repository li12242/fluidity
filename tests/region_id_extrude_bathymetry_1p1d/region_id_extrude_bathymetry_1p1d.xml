<?xml version='1.0' encoding='utf-8'?>
<testproblem>
  <name>region_id_extrude_bathymetry_1p1d</name>
  <owner userid="cwilson"/>
  <problem_definition length="short" nprocs="1">
    <command_line>fluidity -v2 -l region_id_extrude_bathymetry_1p1d.flml</command_line>
  </problem_definition>
  <variables>
    <variable name="err_n_lines" language="python">import glob
files = glob.glob1(".","*.err-?")
err_n_lines = {}
for file in files:
  fileHandle = open(file)
  log = fileHandle.read()
  logSplit = log.split("\n")
  print file + ":"
  for line in logSplit[-10:]:
    print line
  err_n_lines[file] = len(logSplit)
  fileHandle.close()</variable>
    <variable name="log_n_lines" language="python">import glob
files = glob.glob1(".","*.log-?")
log_n_lines = {}
for file in files:
  fileHandle = open(file)
  log = fileHandle.read()
  logSplit = log.split("\n")
  print file + ":"
  for line in logSplit[-10:]:
    print line
  log_n_lines[file] = len(logSplit)
  fileHandle.close()</variable>
    <variable name="integral_tracer" language="python">from fluidity_tools import stat_parser as stat
integral_tracer = stat("landslide_benchmark.stat")["Water"]["Tracer"]["integral"]</variable>
    <variable name="integral_tracer_dg" language="python">from fluidity_tools import stat_parser as stat
integral_tracer_dg = stat("landslide_benchmark.stat")["Water"]["TracerP1DG"]["integral"]</variable>
    <variable name="domain_area" language="python">from fluidity_tools import stat_parser as stat
domain_area = stat("landslide_benchmark.stat")["Water"]["ConstantField"]["integral"]</variable>
    <variable name="no_nodes" language="python">from fluidity_tools import stat_parser as stat
no_nodes = stat("landslide_benchmark.stat")["CoordinateMesh"]["nodes"]</variable>
    <variable name="finish_time" language="python">from fluidity_tools import stat_parser as stat
finish_time = stat("landslide_benchmark.stat")["ElapsedTime"]["value"][-1]</variable>
  </variables>
  <pass_tests>
    <test name="tracer_area_constant" language="python">assert abs(integral_tracer[0]-5506250.) &lt; 1.E-6</test>
    <test name="tracer_dg_area_constant" language="python">assert abs(integral_tracer_dg[0]-3922083.33333336) &lt; 1.E-6</test>
    <test name="domain_area_constant" language="python">assert abs(domain_area[0]-65578750.) &lt; 1.E-10</test>
    <test name="check_no_nodes" language="python">assert abs(no_nodes[0]-26554) == 0</test>
    <test name="check_finish_time" language="python">assert abs(finish_time) &lt; 1.E-10</test>
  </pass_tests>
</testproblem>
